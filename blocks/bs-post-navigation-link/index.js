(()=>{"use strict";const e=window.wp.i18n,t=window.wp.blocks,n=JSON.parse('{"UU":"rundizstrap-companion/blocks-bs-post-navigation-link"}'),a=window.wp.blockEditor,o=window.wp.components,l=window.wp.data,r=window.wp.coreData,i=window.wp.dom,s=window.wp.element,p=["data-","aria-"];function c(e,t){const n={};if(!e)return n;const a=String(t||"").toLowerCase();return p.includes(a)?(Object.entries(e).forEach(([e,t])=>{const o=u(e,a);o&&(n[`${a}${o}`]=d(t))}),n):n}function u(e,t=""){if(null==e)return"";let n=String(e).trim().toLowerCase();const a=String(t||"").toLowerCase();return n?(a&&n.startsWith(a)&&(n=n.slice(a.length)),n="aria-"===a||"aria"===a?n.replace(/[^a-z0-9_-]/g,""):n.replace(/[^a-z0-9._:-]/g,""),n):""}function d(e){return null==e?"":String(e).replace(/[\r\n\t]/g," ").replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F]/g,"").trim()}const m=window.ReactJSXRuntime;function x({label:t,value:n,onChange:a,prefix:l=""}){const r=n||{},[i,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{const e=Object.entries(r).map(([e,t])=>({key:e,val:t}));p(e)},[n]);const c=e=>e.reduce((e,t)=>{const n=u(t.key,l);return n?(e[n]=d(t.val),e):e},{}),x=(e,t,n)=>{const o=[...i];o[e][t]=n,p(o);const r=o.map(e=>u(e.key,l)).filter(e=>""!==e);r.some((e,t)=>r.indexOf(e)!==t)||a(c(o))};return(0,m.jsxs)("div",{className:"components-base-control",children:[(0,m.jsx)("label",{className:"components-base-control__label",children:t}),i.map((t,n)=>(0,m.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,m.jsx)(o.TextControl,{placeholder:(0,e.__)("Key","rundizstrap-companion"),value:t.key,onChange:e=>x(n,"key",e)}),(0,m.jsx)(o.TextControl,{placeholder:(0,e.__)("Value","rundizstrap-companion"),value:t.val,onChange:e=>x(n,"val",e)}),(0,m.jsx)(o.Button,{size:"small",isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const t=i.filter((t,n)=>n!==e);p(t),a(c(t))})(n),label:(0,e.__)("Remove","rundizstrap-companion")})]},n)),(0,m.jsx)(o.Button,{variant:"secondary",onClick:()=>{const e=[...i,{key:"",val:""}];p(e)},size:"small",children:(0,e.__)("Add attribute","rundizstrap-companion")})]})}const _=(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-left",viewBox:"0 0 16 16",children:[(0,m.jsx)("path",{fillRule:"evenodd",d:"M3.646 8.354a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L4.707 8l3.647 3.646a.5.5 0 0 1-.708.708z"}),(0,m.jsx)("path",{fillRule:"evenodd",d:"M7.646 8.354a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L8.707 8l3.647 3.646a.5.5 0 0 1-.708.708z"})]}),h=(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-right",viewBox:"0 0 16 16",children:[(0,m.jsx)("path",{fillRule:"evenodd",d:"M12.354 8.354a.5.5 0 0 0 0-.708l-4-4a.5.5 0 1 0-.708.708L11.293 8l-3.647 3.646a.5.5 0 0 0 .708.708z"}),(0,m.jsx)("path",{fillRule:"evenodd",d:"M8.354 8.354a.5.5 0 0 0 0-.708l-4-4a.5.5 0 1 0-.708.708L7.293 8l-3.647 3.646a.5.5 0 0 0 .708.708z"})]}),b=[{name:"post-previous",title:(0,e.__)("Bootstrap Previous Post","rundizstrap-companion"),description:(0,e.__)("Displays the post link that precedes the current post in Bootstrap style. This block is in the RundizStrap Companion.","rundizstrap-companion"),icon:_,attributes:{type:"previous",className:"btn btn-secondary"},scope:["inserter","transform"],example:{attributes:{className:"btn btn-secondary",type:"previous",label:(0,e.__)("Previous post","rundizstrap-companion")}}},{isDefault:!0,name:"post-next",title:(0,e.__)("Bootstrap Next Post","rundizstrap-companion"),description:(0,e.__)("Displays the post link that follows the current post in Bootstrap style. This block is in the RundizStrap Companion.","rundizstrap-companion"),icon:h,attributes:{type:"next",className:"btn btn-secondary"},scope:["inserter","transform"],example:{attributes:{className:"btn btn-secondary",type:"next",label:(0,e.__)("Next post","rundizstrap-companion")}}}];b.forEach(e=>{e.isActive=(e,t)=>e.type===t.type});const g=b;(0,t.registerBlockType)(n.UU,{icon:h,edit:function({context:{postType:t},attributes:n,setAttributes:s}){const{type:p,label:u,showTitle:d,taxonomy:_,prependTextHtml:h,appendTextHtml:b,rel:g,tabindex:v,dataAttributes:w,ariaAttributes:y}=n,f="next"===p,z=f?"next":"prev",T=f?(0,e.__)("Next","rundizstrap-companion"):(0,e.__)("Previous","rundizstrap-companion"),j=e=>0===Object.keys(e||{}).length,C=(0,e.__)("An example title","rundizstrap-companion"),k=function(e){if(null==e)return"";if("object"==typeof e)return"";let t=String(e);return t.includes("<")&&(t=t.replace(/<(?![a-zA-Z\/?!])|<(?!=[\w-]+(?:\s|$))/g,"&lt;"),t=t.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<\/?[^>]+>/g,""),t=t.replace(/<\n/g,"&lt;\n")),t=t.replace(/[\r\n\t ]+/g," ").trim(),/%[a-f0-9]{2}/i.test(t)&&(t=t.replace(/%[a-f0-9]{2}/gi,""),t=t.replace(/ +/g," ").trim()),t}(g||""),D=(0,i.safeHTML)(h||""),S=(0,i.safeHTML)(b||""),A=(0,l.useSelect)(e=>e(r.store).getTaxonomies({type:t,per_page:-1}),[t]),B=[{label:(0,e.__)("Unfiltered (default)","rundizstrap-companion"),value:""},...(A??[]).filter(({visibility:e})=>!!e?.publicly_queryable).map(e=>({label:e.name,value:e.slug}))],N=(0,a.useBlockProps)({className:"post-navigation-link-"+p,rel:k||z,...Number.isInteger(v)?{tabIndex:v}:{},...c(w,"data-"),...c(y,"aria-"),onClick:e=>e.preventDefault()});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(a.InspectorControls,{children:[(0,m.jsxs)(o.__experimentalToolsPanel,{label:(0,e.__)("Settings","rundizstrap-companion"),resetAll:()=>{s({showTitle:!1,prependTextHtml:"",appendTextHtml:""})},children:[(0,m.jsx)(o.__experimentalToolsPanelItem,{label:(0,e.__)("Display the title as a link","rundizstrap-companion"),isShownByDefault:!0,hasValue:()=>!!d,onDeselect:()=>s({showTitle:!1}),children:(0,m.jsx)(o.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,e.__)("Display the title as a link","rundizstrap-companion"),help:(0,e.__)("This will be replace custom label.","rundizstrap-companion"),checked:!!d,onChange:()=>s({showTitle:!d})})}),(0,m.jsx)(o.__experimentalToolsPanelItem,{label:(0,e.__)("Prepend text/HTML","rundizstrap-companion"),isShownByDefault:!0,hasValue:()=>""!==h,onDeselect:()=>s({prependTextHtml:""}),children:(0,m.jsx)(o.TextControl,{label:(0,e.__)("Prepend text/HTML","rundizstrap-companion"),value:h,onChange:e=>s({prependTextHtml:e}),help:(0,e.__)("Text or HTML to prepend before the link text.","rundizstrap-companion")})}),(0,m.jsx)(o.__experimentalToolsPanelItem,{label:(0,e.__)("Append text/HTML","rundizstrap-companion"),isShownByDefault:!0,hasValue:()=>""!==b,onDeselect:()=>s({appendTextHtml:""}),children:(0,m.jsx)(o.TextControl,{label:(0,e.__)("Append text/HTML","rundizstrap-companion"),value:b,onChange:e=>s({appendTextHtml:e}),help:(0,e.__)("Text or HTML to append after the link text.","rundizstrap-companion")})})]}),(0,m.jsxs)(o.__experimentalToolsPanel,{label:(0,e.__)("Link Attributes","rundizstrap-companion"),resetAll:()=>{s({rel:"",tabindex:void 0})},children:[(0,m.jsx)(o.__experimentalToolsPanelItem,{label:(0,e.__)("Rel","rundizstrap-companion"),isShownByDefault:!0,hasValue:()=>""!==g,onDeselect:()=>s({rel:""}),children:(0,m.jsx)(o.TextControl,{label:(0,e.__)("Rel","rundizstrap-companion"),value:g,onChange:e=>s({rel:e})})}),(0,m.jsx)(o.__experimentalToolsPanelItem,{label:(0,e.__)("Tab index","rundizstrap-companion"),isShownByDefault:!0,hasValue:()=>Number.isInteger(v),onDeselect:()=>s({tabindex:void 0}),children:(0,m.jsx)(o.TextControl,{type:"number",label:(0,e.__)("Tab index","rundizstrap-companion"),value:Number.isInteger(v)?v:"",onChange:e=>{if(""===e)return void s({tabindex:void 0});const t=Number(e);Number.isInteger(t)&&s({tabindex:t})}})})]}),(0,m.jsxs)(o.__experimentalToolsPanel,{label:(0,e.__)("Data and Aria Attributes","rundizstrap-companion"),resetAll:()=>s({dataAttributes:{},ariaAttributes:{}}),children:[(0,m.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>!j(w),label:(0,e.__)("Data attributes","rundizstrap-companion"),onDeselect:()=>s({dataAttributes:{}}),isShownByDefault:!0,children:(0,m.jsx)(x,{label:(0,e.__)("Data attributes","rundizstrap-companion")+" ",value:w,onChange:e=>s({dataAttributes:e}),prefix:"data-"})}),(0,m.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>!j(y),label:(0,e.__)("Aria attributes","rundizstrap-companion"),onDeselect:()=>s({ariaAttributes:{}}),isShownByDefault:!0,children:(0,m.jsx)(x,{label:(0,e.__)("Aria attributes","rundizstrap-companion")+" ",value:y,onChange:e=>s({ariaAttributes:e}),prefix:"aria-"})})]})]}),(0,m.jsx)(a.InspectorControls,{group:"advanced",children:(0,m.jsx)(o.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,e.__)("Filter by taxonomy","rundizstrap-companion"),value:_,options:B,onChange:e=>s({taxonomy:e}),help:(0,e.__)("Only link to posts that have the same taxonomy terms as the current post. For example the same tags or categories.","rundizstrap-companion")})}),(0,m.jsxs)("a",{...N,children:[!!h&&(0,m.jsx)("span",{dangerouslySetInnerHTML:{__html:D}}),d?(0,m.jsx)(m.Fragment,{children:C}):(0,m.jsx)(a.RichText,{tagName:"span",identifier:"label","aria-label":f?(0,e.__)("Next post","rundizstrap-companion"):(0,e.__)("Previous post","rundizstrap-companion"),placeholder:T,value:u,withoutInteractiveFormatting:!0,onChange:e=>s({label:e})}),!!b&&(0,m.jsx)("span",{dangerouslySetInnerHTML:{__html:S}})]})]})},variations:g,example:{attributes:{className:"btn btn-secondary",type:"next",label:(0,e.__)("Bootstrap Next Post","rundizstrap-companion")}}})})();