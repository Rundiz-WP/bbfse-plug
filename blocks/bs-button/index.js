(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"UU":"rundizstrap-companion/blocks-bs-button"}'),a=window.wp.i18n,n=window.wp.blockEditor,o=window.wp.components,l=window.wp.element,r=window.ReactJSXRuntime;function s({label:e,value:t,onChange:n}){const s=t||{},[i,u]=(0,l.useState)([]);(0,l.useEffect)(()=>{const e=Object.entries(s).map(([e,t])=>({key:e,val:t}));u(e)},[t]);const m=(e,t,a)=>{const o=[...i];o[e][t]=a,u(o);const l=o.map(e=>e.key);if(!l.some((e,t)=>l.indexOf(e)!==t)){const e=o.reduce((e,t)=>(t.key&&(e[t.key]=t.val),e),{});n(e)}};return(0,r.jsxs)("div",{className:"components-base-control",children:[(0,r.jsx)("label",{className:"components-base-control__label",children:e}),i.map((e,t)=>(0,r.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,r.jsx)(o.TextControl,{placeholder:(0,a.__)("Key","rundizstrap-companion"),value:e.key,onChange:e=>m(t,"key",e)}),(0,r.jsx)(o.TextControl,{placeholder:(0,a.__)("Value","rundizstrap-companion"),value:e.val,onChange:e=>m(t,"val",e)}),(0,r.jsx)(o.Button,{size:"small",isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const t=i.filter((t,a)=>a!==e);u(t);const a=t.reduce((e,t)=>(t.key&&(e[t.key]=t.val),e),{});n(a)})(t),label:(0,a.__)("Remove","rundizstrap-companion")})]},t)),(0,r.jsx)(o.Button,{variant:"secondary",onClick:()=>{const e=[...i,{key:"",val:""}];u(e)},size:"small",children:(0,a.__)("Add attribute","rundizstrap-companion")})]})}function i(e,t){const a={};return e&&Object.entries(e).forEach(([e,n])=>{e&&(a[`${t}${e}`]=n)}),a}(0,e.registerBlockType)(t.UU,{edit:function({attributes:e,setAttributes:t}){const{tagName:u,textHtml:m,href:c,linkRole:p,linkTabIndex:d,dataAttributes:b,ariaAttributes:_,autofocus:x,disabled:h,form:f,formenctype:g,formmethod:v,formnovalidate:T,formtarget:j,name:y,type:z,value:D,className:w}=e;(0,l.useEffect)(()=>{void 0===w&&t({className:"btn"})},[w,t]);const C="a"===u?"a":"button",k=(w||"").split(/\s+/).filter(Boolean).some(e=>"btn"===e.toLowerCase()),I=e=>0===Object.keys(e||{}).length,B=i(b,"data-"),S=i(_,"aria-"),P=(0,n.useBlockProps)({...B,...S,..."a"===u&&c?{href:c}:{},..."a"===u&&p?{role:p}:{},..."a"===u&&Number.isInteger(d)?{tabIndex:d}:{},..."a"===u?{onClick:e=>e.preventDefault()}:{},..."button"===u&&x?{autoFocus:!0}:{},..."button"===u&&h?{disabled:!0}:{},..."button"===u&&f?{form:f}:{},..."button"===u&&g?{formEncType:g}:{},..."button"===u&&v?{formMethod:v}:{},..."button"===u&&T?{formNoValidate:!0}:{},..."button"===u&&j?{formTarget:j}:{},..."button"===u&&y?{name:y}:{},..."button"===u&&z?{type:z}:{},..."button"===u&&D?{value:D}:{}}),A=[{label:(0,a.__)("Default","rundizstrap-companion"),value:""},{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"},{label:"multipart/form-data",value:"multipart/form-data"},{label:"text/plain",value:"text/plain"}],N=[{label:(0,a.__)("Default","rundizstrap-companion"),value:""},{label:"get",value:"get"},{label:"post",value:"post"},{label:"dialog",value:"dialog"}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.InspectorControls,{children:["a"===u&&!c&&(0,r.jsx)("div",{style:{padding:"0 16px",marginBottom:"16px"},children:(0,r.jsx)(o.Notice,{status:"warning",isDismissible:!1,children:(0,a.__)("Please add an href value when using <a>.","rundizstrap-companion")})}),!k&&(0,r.jsx)("div",{style:{padding:"0 16px",marginBottom:"16px"},children:(0,r.jsx)(o.Notice,{status:"warning",isDismissible:!1,children:(0,a.__)('Please ensure the CSS class list contains the Bootstrap class "btn".',"rundizstrap-companion")})}),(0,r.jsxs)(o.__experimentalToolsPanel,{label:(0,a.__)("Button Settings","rundizstrap-companion"),resetAll:()=>t({tagName:"button",textHtml:""}),children:[(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>"button"!==u,label:(0,a.__)("Tag Name","rundizstrap-companion"),onDeselect:()=>t({tagName:"button"}),isShownByDefault:!0,children:(0,r.jsx)(o.SelectControl,{label:(0,a.__)("Tag Name","rundizstrap-companion"),value:u,options:[{label:"<button>",value:"button"},{label:"<a>",value:"a"}],onChange:e=>t({tagName:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==m,label:(0,a.__)("Button text/HTML","rundizstrap-companion"),onDeselect:()=>t({textHtml:""}),isShownByDefault:!0,children:(0,r.jsx)(o.TextControl,{label:(0,a.__)("Button text/HTML","rundizstrap-companion"),value:m,onChange:e=>t({textHtml:e}),help:(0,a.__)('You can use text or HTML, e.g. <i class="bi bi-save"></i> Save',"rundizstrap-companion")})})]}),"a"===u&&(0,r.jsxs)(o.__experimentalToolsPanel,{label:(0,a.__)("Link Attributes","rundizstrap-companion"),resetAll:()=>t({href:"",linkRole:"",linkTabIndex:void 0}),children:[(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==c,label:(0,a._x)("Href","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({href:""}),isShownByDefault:!0,children:(0,r.jsx)(o.TextControl,{label:(0,a._x)("Href","HTML attribute","rundizstrap-companion"),value:c,onChange:e=>t({href:e}),help:(0,a.__)("Required when using <a>.","rundizstrap-companion")})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==p,label:(0,a._x)("Role","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({linkRole:""}),isShownByDefault:!0,children:(0,r.jsx)(o.TextControl,{label:(0,a._x)("Role","HTML attribute","rundizstrap-companion"),value:p,onChange:e=>t({linkRole:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>Number.isInteger(d),label:(0,a.__)("Tab index","rundizstrap-companion"),onDeselect:()=>t({linkTabIndex:void 0}),isShownByDefault:!0,children:(0,r.jsx)(o.TextControl,{type:"number",label:(0,a.__)("Tab index","rundizstrap-companion"),value:Number.isInteger(d)?d:"",onChange:e=>{if(""===e)return void t({linkTabIndex:void 0});const a=Number(e);Number.isInteger(a)&&t({linkTabIndex:a})}})})]}),"button"===u&&(0,r.jsxs)(o.__experimentalToolsPanel,{label:(0,a.__)("Button Attributes","rundizstrap-companion"),resetAll:()=>t({autofocus:!1,disabled:!1,form:"",formenctype:"",formmethod:"",formnovalidate:!1,formtarget:"",name:"",type:"button",value:""}),children:[(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>x,label:(0,a._x)("Autofocus","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({autofocus:!1}),isShownByDefault:!0,children:(0,r.jsx)(o.ToggleControl,{checked:x,label:(0,a._x)("Autofocus","HTML attribute","rundizstrap-companion"),onChange:e=>t({autofocus:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>h,label:(0,a._x)("Disabled","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({disabled:!1}),isShownByDefault:!0,children:(0,r.jsx)(o.ToggleControl,{checked:h,label:(0,a._x)("Disabled","HTML attribute","rundizstrap-companion"),onChange:e=>t({disabled:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==f,label:(0,a.__)("Form ID","rundizstrap-companion"),onDeselect:()=>t({form:""}),isShownByDefault:!0,children:(0,r.jsx)(o.TextControl,{label:(0,a.__)("Form ID","rundizstrap-companion"),value:f,onChange:e=>t({form:e}),help:(0,r.jsxs)(r.Fragment,{children:[(0,a.__)("ID of the form this button is associated with.","rundizstrap-companion")," ",(0,r.jsx)(o.ExternalLink,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/button",children:(0,a.__)("Learn more","rundizstrap-companion")})]})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==g,label:(0,a.__)("Form enctype","rundizstrap-companion"),onDeselect:()=>t({formenctype:""}),isShownByDefault:!0,children:(0,r.jsx)(o.SelectControl,{label:(0,a.__)("Form enctype","rundizstrap-companion"),value:g,options:A,onChange:e=>t({formenctype:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==v,label:(0,a.__)("Form method","rundizstrap-companion"),onDeselect:()=>t({formmethod:""}),isShownByDefault:!0,children:(0,r.jsx)(o.SelectControl,{label:(0,a.__)("Form method","rundizstrap-companion"),value:v,options:N,onChange:e=>t({formmethod:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>T,label:(0,a.__)("Form novalidate","rundizstrap-companion"),onDeselect:()=>t({formnovalidate:!1}),isShownByDefault:!0,children:(0,r.jsx)(o.ToggleControl,{checked:T,label:(0,a.__)("Form novalidate","rundizstrap-companion"),onChange:e=>t({formnovalidate:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==j,label:(0,a.__)("Form target","rundizstrap-companion"),onDeselect:()=>t({formtarget:""}),isShownByDefault:!0,children:(0,r.jsx)(o.TextControl,{label:(0,a.__)("Form target","rundizstrap-companion"),value:j,onChange:e=>t({formtarget:e}),help:(0,a.__)("Target for form submission, e.g. _blank.","rundizstrap-companion")})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==y,label:(0,a._x)("Name","Button name","rundizstrap-companion"),onDeselect:()=>t({name:""}),isShownByDefault:!0,children:(0,r.jsx)(o.TextControl,{label:(0,a._x)("Name","Button name","rundizstrap-companion"),value:y,onChange:e=>t({name:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>"button"!==z,label:(0,a._x)("Type","Button type","rundizstrap-companion"),onDeselect:()=>t({type:"button"}),isShownByDefault:!0,children:(0,r.jsx)(o.SelectControl,{label:(0,a._x)("Type","Button type","rundizstrap-companion"),value:z,options:[{label:"button",value:"button"},{label:"submit",value:"submit"},{label:"reset",value:"reset"}],onChange:e=>t({type:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==D,label:(0,a.__)("Value","rundizstrap-companion"),onDeselect:()=>t({value:""}),isShownByDefault:!0,children:(0,r.jsx)(o.TextControl,{label:(0,a.__)("Value","rundizstrap-companion"),value:D,onChange:e=>t({value:e})})})]}),(0,r.jsxs)(o.__experimentalToolsPanel,{label:(0,a.__)("Data and Aria Attributes","rundizstrap-companion"),resetAll:()=>t({dataAttributes:{},ariaAttributes:{}}),children:[(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>!I(b),label:(0,a.__)("Data attributes","rundizstrap-companion"),onDeselect:()=>t({dataAttributes:{}}),isShownByDefault:!0,children:(0,r.jsx)(s,{label:(0,a.__)("Data attributes","rundizstrap-companion")+" ",value:b,onChange:e=>t({dataAttributes:e})})}),(0,r.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>!I(_),label:(0,a.__)("Aria attributes","rundizstrap-companion"),onDeselect:()=>t({ariaAttributes:{}}),isShownByDefault:!0,children:(0,r.jsx)(s,{label:(0,a.__)("Aria attributes","rundizstrap-companion")+" ",value:_,onChange:e=>t({ariaAttributes:e})})})]})]}),m?(0,r.jsx)(C,{...P,dangerouslySetInnerHTML:{__html:m}}):(0,r.jsx)(C,{...P})]})},save:function({attributes:e}){const{tagName:t,textHtml:a,href:o,linkRole:l,linkTabIndex:s,dataAttributes:u,ariaAttributes:m,autofocus:c,disabled:p,form:d,formenctype:b,formmethod:_,formnovalidate:x,formtarget:h,name:f,type:g,value:v}=e,T="a"===t?"a":"button",j={...{...n.useBlockProps.save(),...i(u,"data-"),...i(m,"aria-")},..."a"===t?{...o?{href:o}:{},...l?{role:l}:{},...Number.isInteger(s)?{tabIndex:s}:{}}:{},..."button"===t?{...c?{autoFocus:!0}:{},...p?{disabled:!0}:{},...d?{form:d}:{},...b?{formEncType:b}:{},..._?{formMethod:_}:{},...x?{formNoValidate:!0}:{},...h?{formTarget:h}:{},...f?{name:f}:{},...g?{type:g}:{},...v?{value:v}:{}}:{}};return a?(0,r.jsx)(T,{...j,dangerouslySetInnerHTML:{__html:a}}):(0,r.jsx)(T,{...j})}})})();