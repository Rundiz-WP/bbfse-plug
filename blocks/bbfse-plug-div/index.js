(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"UU":"bbfse-plug/blocks-bbfse-plug-div"}'),l=window.wp.i18n,a=window.wp.blockEditor,s=window.wp.components,n=window.wp.element,o=window.wp.data,r=window.ReactJSXRuntime;function i({label:e,value:t,onChange:a}){const o=t||{},[i,b]=(0,n.useState)([]);(0,n.useEffect)(()=>{const e=Object.entries(o).map(([e,t])=>({key:e,val:t}));b(e)},[t]);const u=(e,t,l)=>{const s=[...i];s[e][t]=l,b(s);const n=s.map(e=>e.key);if(!n.some((e,t)=>n.indexOf(e)!==t)){const e=s.reduce((e,t)=>(t.key&&(e[t.key]=t.val),e),{});a(e)}};return(0,r.jsxs)("div",{className:"components-base-control",children:[(0,r.jsx)("label",{className:"components-base-control__label",children:e}),i.map((e,t)=>(0,r.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,r.jsx)(s.TextControl,{placeholder:(0,l.__)("Key","bbfse-plug"),value:e.key,onChange:e=>u(t,"key",e)}),(0,r.jsx)(s.TextControl,{placeholder:(0,l.__)("Value","bbfse-plug"),value:e.val,onChange:e=>u(t,"val",e)}),(0,r.jsx)(s.Button,{isSmall:!0,isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const t=i.filter((t,l)=>l!==e);b(t);const l=t.reduce((e,t)=>(t.key&&(e[t.key]=t.val),e),{});a(l)})(t),label:(0,l.__)("Remove","bbfse-plug")})]},t)),(0,r.jsx)(s.Button,{variant:"secondary",onClick:()=>{const e=[...i,{key:"",val:""}];b(e)},isSmall:!0,children:(0,l.__)("Add attribute","bbfse-plug")})]})}function b(e,t){const l={};return e&&Object.entries(e).forEach(([e,a])=>{e&&(l[`${t}${e}`]=a)}),l}function u({tagName:e,onSelectTagName:t}){return(0,r.jsx)(a.InspectorControls,{group:"advanced",children:(0,r.jsx)(s.SelectControl,{__nextHasNoMarginBottom:!0,label:(0,l.__)("HTML element","bbfse-plug"),value:e,onChange:t,options:[{label:(0,l.__)("Default (<div>)","bbfse-plug"),value:"div"},{label:"<header>",value:"header"},{label:"<main>",value:"main"},{label:"<section>",value:"section"},{label:"<article>",value:"article"},{label:"<aside>",value:"aside"},{label:"<footer>",value:"footer"}]})})}(0,e.registerBlockType)(t.UU,{icon:{src:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-code-square",viewBox:"0 0 16 16",children:[(0,r.jsx)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),(0,r.jsx)("path",{d:"M6.854 4.646a.5.5 0 0 1 0 .708L4.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0m2.292 0a.5.5 0 0 0 0 .708L11.793 8l-2.647 2.646a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0"})]})},edit:function({attributes:e,setAttributes:t,clientId:c}){const{tagName:d="div",accesskey:x,lang:p,role:g,tabindex:h,title:_,dataAttributes:m,ariaAttributes:f}=e,{hasInnerBlocks:v}=(0,o.useSelect)(e=>{const{getBlock:t}=e(a.store),l=t(c);return{hasInnerBlocks:!(!l||!l.innerBlocks.length)}},[c]),j=(0,n.useRef)(),k=e=>0===Object.keys(e||{}).length,w=(0,a.useBlockProps)({ref:j,...x?{accessKey:x}:{},...p?{lang:p}:{},...g?{role:g}:{},...Number.isInteger(h)?{tabIndex:h}:{},..._?{title:_}:{},...b(m,"data-"),...b(f,"aria-")});let y;v||(y=a.InnerBlocks.ButtonBlockAppender);const T=(0,a.useInnerBlocksProps)(w,{dropZoneElement:j.current,renderAppender:y});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{tagName:d,onSelectTagName:e=>t({tagName:e})}),(0,r.jsx)(a.InspectorControls,{children:(0,r.jsxs)(s.__experimentalToolsPanel,{label:(0,l.__)("HTML Attributes","bbfse-plug"),resetAll:()=>t({accesskey:"",lang:"",role:"",tabindex:void 0,title:""}),children:[(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>""!==x,label:(0,l._x)("Accesskey","HTML attribute","bbfse-plug"),onDeselect:()=>t({accesskey:""}),isShownByDefault:!0,children:(0,r.jsx)(s.TextControl,{label:(0,l._x)("Accesskey","HTML attribute","bbfse-plug"),value:x,onChange:e=>t({accesskey:e})})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>""!==p,label:(0,l._x)("Lang","HTML attribute","bbfse-plug"),onDeselect:()=>t({lang:""}),isShownByDefault:!0,children:(0,r.jsx)(s.TextControl,{label:(0,l._x)("Lang","HTML attribute","bbfse-plug"),value:p,onChange:e=>t({lang:e})})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>""!==g,label:(0,l._x)("Role","HTML attribute","bbfse-plug"),onDeselect:()=>t({role:""}),isShownByDefault:!0,children:(0,r.jsx)(s.TextControl,{label:(0,l._x)("Role","HTML attribute","bbfse-plug"),value:g,onChange:e=>t({role:e})})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>Number.isInteger(h),label:(0,l.__)("Tab index","bbfse-plug"),onDeselect:()=>t({tabindex:void 0}),isShownByDefault:!0,children:(0,r.jsx)(s.TextControl,{type:"number",label:(0,l.__)("Tab index","bbfse-plug"),value:Number.isInteger(h)?h:"",onChange:e=>{if(""===e)return void t({tabindex:void 0});const l=Number(e);Number.isInteger(l)&&t({tabindex:l})}})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>""!==_,label:(0,l._x)("Title","HTML attribute","bbfse-plug"),onDeselect:()=>t({title:""}),isShownByDefault:!0,children:(0,r.jsx)(s.TextControl,{label:(0,l._x)("Title","HTML attribute","bbfse-plug"),value:_,onChange:e=>t({title:e})})})]})}),(0,r.jsx)(a.InspectorControls,{children:(0,r.jsxs)(s.__experimentalToolsPanel,{label:(0,l.__)("Data and Aria Attributes","bbfse-plug"),resetAll:()=>t({dataAttributes:{},ariaAttributes:{}}),children:[(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!k(m),label:(0,l.__)("Data attributes","bbfse-plug"),onDeselect:()=>t({dataAttributes:{}}),isShownByDefault:!0,children:(0,r.jsx)(i,{label:(0,l.__)("Data attributes","bbfse-plug")+" ",value:m,onChange:e=>t({dataAttributes:e})})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!k(f),label:(0,l.__)("Aria attributes","bbfse-plug"),onDeselect:()=>t({ariaAttributes:{}}),isShownByDefault:!0,children:(0,r.jsx)(i,{label:(0,l.__)("Aria attributes","bbfse-plug")+" ",value:f,onChange:e=>t({ariaAttributes:e})})})]})}),(0,r.jsx)(d,{...T})]})},save:function({attributes:e}){const{tagName:t="div",accesskey:l,lang:s,role:n,tabindex:o,title:i,dataAttributes:u,ariaAttributes:c}=e,d=a.useBlockProps.save({...l?{accessKey:l}:{},...s?{lang:s}:{},...n?{role:n}:{},...Number.isInteger(o)?{tabIndex:o}:{},...i?{title:i}:{},...b(u,"data-"),...b(c,"aria-")}),x=a.useInnerBlocksProps.save(d);return(0,r.jsx)(t,{...x})}})})();