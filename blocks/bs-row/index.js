(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"UU":"rundizstrap-companion/blocks-bs-row"}'),a=window.wp.i18n,n=window.wp.blockEditor,r=window.wp.components,s=window.wp.element,o=window.wp.data,i=["data-","aria-"];function l(e,t){const a={};if(!e)return a;const n=String(t||"").toLowerCase();return i.includes(n)?(Object.entries(e).forEach(([e,t])=>{const r=c(e,n);r&&(a[`${n}${r}`]=u(t))}),a):a}function c(e,t=""){if(null==e)return"";let a=String(e).trim().toLowerCase();const n=String(t||"").toLowerCase();return a?(n&&a.startsWith(n)&&(a=a.slice(n.length)),a="aria-"===n||"aria"===n?a.replace(/[^a-z0-9_-]/g,""):a.replace(/[^a-z0-9._:-]/g,""),a):""}function u(e){return null==e?"":String(e).replace(/[\r\n\t]/g," ").replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F]/g,"").trim()}const d=window.ReactJSXRuntime;function p({label:e,value:t,onChange:n,prefix:o=""}){const i=t||{},[l,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{const e=Object.entries(i).map(([e,t])=>({key:e,val:t}));p(e)},[t]);const m=e=>e.reduce((e,t)=>{const a=c(t.key,o);return a?(e[a]=u(t.val),e):e},{}),h=e=>{const t=e.map(e=>c(e.key,o)).filter(e=>""!==e);t.some((e,a)=>t.indexOf(e)!==a)||n(m(e))},b=(e,t,a)=>{const n=[...l];n[e][t]=a,p(n)};return(0,d.jsxs)("div",{className:"components-base-control",children:[(0,d.jsx)("label",{className:"components-base-control__label",children:e}),l.map((e,t)=>(0,d.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,d.jsx)(r.TextControl,{placeholder:(0,a.__)("Key","rundizstrap-companion"),value:e.key,onChange:e=>b(t,"key",e),onBlur:()=>h(l)}),(0,d.jsx)(r.TextControl,{placeholder:(0,a.__)("Value","rundizstrap-companion"),value:e.val,onChange:e=>b(t,"val",e),onBlur:()=>h(l)}),(0,d.jsx)(r.Button,{size:"small",isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const t=l.filter((t,a)=>a!==e);p(t),n(m(t))})(t),label:(0,a.__)("Remove","rundizstrap-companion")})]},t)),(0,d.jsx)(r.Button,{variant:"secondary",onClick:()=>{const e=[...l,{key:"",val:""}];p(e)},size:"small",children:(0,a.__)("Add attribute","rundizstrap-companion")})]})}const m=["div","header","main","nav","section","article","aside","footer"],h=new Set(m);function b(e,t){const a=String(e||"").trim().toLowerCase(),n=String(t||"").trim().toLowerCase();return h.has(a)?a:h.has(n)?n:"div"}const v="div";function w({tagName:e,onSelectTagName:t}){const s=m.map(e=>({label:e===v?(0,a.__)("Default (<div>)","rundizstrap-companion"):"<"+e+">",value:e}));return(0,d.jsx)(n.InspectorControls,{group:"advanced",children:(0,d.jsx)(r.SelectControl,{__nextHasNoMarginBottom:!0,label:(0,a.__)("HTML element","rundizstrap-companion"),value:e,onChange:t,options:s})})}(0,e.registerBlockType)(t.UU,{icon:{src:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-view-stacked",viewBox:"0 0 16 16",children:(0,d.jsx)("path",{d:"M3 0h10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2m0 1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm0 8h10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2m0 1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z"})})},edit:function({attributes:e,setAttributes:t,clientId:i}){const{tagName:l,dataAttributes:c,ariaAttributes:u}=e,m=b(l,v),{hasInnerBlocks:h}=(0,o.useSelect)(e=>{const{getBlock:t}=e(n.store),a=t(i);return{hasInnerBlocks:!(!a||!a.innerBlocks.length)}},[i]),g=(0,s.useRef)(),x=e=>0===Object.keys(e||{}).length,_=(0,n.useBlockProps)({ref:g,className:"row"});let f;h||(f=n.InnerBlocks.ButtonBlockAppender);const j=(0,n.useInnerBlocksProps)(_,{dropZoneElement:g.current,renderAppender:f});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w,{tagName:m,onSelectTagName:e=>t({tagName:b(e,v)})}),(0,d.jsx)(n.InspectorControls,{children:(0,d.jsxs)(r.__experimentalToolsPanel,{label:(0,a.__)("Data and Aria Attributes","rundizstrap-companion"),resetAll:()=>t({dataAttributes:{},ariaAttributes:{}}),children:[(0,d.jsx)(r.__experimentalToolsPanelItem,{hasValue:()=>!x(c),label:(0,a.__)("Data attributes","rundizstrap-companion"),onDeselect:()=>t({dataAttributes:{}}),isShownByDefault:!0,children:(0,d.jsx)(p,{label:(0,a.__)("Data attributes","rundizstrap-companion")+" ",value:c,onChange:e=>t({dataAttributes:e}),prefix:"data-"})}),(0,d.jsx)(r.__experimentalToolsPanelItem,{hasValue:()=>!x(u),label:(0,a.__)("Aria attributes","rundizstrap-companion"),onDeselect:()=>t({ariaAttributes:{}}),isShownByDefault:!0,children:(0,d.jsx)(p,{label:(0,a.__)("Aria attributes","rundizstrap-companion")+" ",value:u,onChange:e=>t({ariaAttributes:e}),prefix:"aria-"})})]})}),(0,d.jsx)(m,{...j})]})},save:function({attributes:e}){const{tagName:t,dataAttributes:a,ariaAttributes:r}=e,s=b(t,"div"),o=n.useBlockProps.save({className:"row",...l(a,"data-"),...l(r,"aria-")}),i=n.useInnerBlocksProps.save(o);return(0,d.jsx)(s,{...i})}})})();