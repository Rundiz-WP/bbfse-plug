(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"UU":"bbfse-plugin/blocks-bs-column"}'),a=window.wp.i18n,s=window.wp.blockEditor,l=window.wp.components,n=window.wp.element,o=window.wp.data,i=window.ReactJSXRuntime;function r({label:e,value:t,onChange:s}){const o=t||{},[r,c]=(0,n.useState)([]);(0,n.useEffect)(()=>{const e=Object.entries(o).map(([e,t])=>({key:e,val:t}));c(e)},[t]);const u=(e,t,a)=>{const l=[...r];l[e][t]=a,c(l);const n=l.map(e=>e.key);if(!n.some((e,t)=>n.indexOf(e)!==t)){const e=l.reduce((e,t)=>(t.key&&(e[t.key]=t.val),e),{});s(e)}};return(0,i.jsxs)("div",{className:"components-base-control",children:[(0,i.jsx)("label",{className:"components-base-control__label",children:e}),r.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,i.jsx)(l.TextControl,{placeholder:(0,a.__)("Key","bbfse-plugin"),value:e.key,onChange:e=>u(t,"key",e)}),(0,i.jsx)(l.TextControl,{placeholder:(0,a.__)("Value","bbfse-plugin"),value:e.val,onChange:e=>u(t,"val",e)}),(0,i.jsx)(l.Button,{isSmall:!0,isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const t=r.filter((t,a)=>a!==e);c(t);const a=t.reduce((e,t)=>(t.key&&(e[t.key]=t.val),e),{});s(a)})(t),label:(0,a.__)("Remove","bbfse-plugin")})]},t)),(0,i.jsx)(l.Button,{variant:"secondary",onClick:()=>{const e=[...r,{key:"",val:""}];c(e)},isSmall:!0,children:(0,a.__)("Add attribute","bbfse-plugin")})]})}function c({tagName:e,onSelectTagName:t}){return(0,i.jsx)(s.InspectorControls,{group:"advanced",children:(0,i.jsx)(l.SelectControl,{__nextHasNoMarginBottom:!0,label:(0,a.__)("HTML element","bbfse-plugin"),value:e,onChange:t,options:[{label:(0,a.__)("Default (<div>)","bbfse-plugin"),value:"div"},{label:"<header>",value:"header"},{label:"<main>",value:"main"},{label:"<section>",value:"section"},{label:"<article>",value:"article"},{label:"<aside>",value:"aside"},{label:"<footer>",value:"footer"}]})})}function u(e,t){const a={};return e&&Object.entries(e).forEach(([e,s])=>{e&&(a[`${t}${e}`]=s)}),a}(0,e.registerBlockType)(t.UU,{icon:{src:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-layout-three-columns",viewBox:"0 0 16 16",children:(0,i.jsx)("path",{d:"M0 1.5A1.5 1.5 0 0 1 1.5 0h13A1.5 1.5 0 0 1 16 1.5v13a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5zM1.5 1a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5H5V1zM10 15V1H6v14zm1 0h3.5a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5H11z"})})},edit:function({attributes:e,setAttributes:t,clientId:u}){const{tagName:b="div",className:d,dataAttributes:p,ariaAttributes:m}=e,{hasInnerBlocks:g}=(0,o.useSelect)(e=>{const{getBlock:t}=e(s.store),a=t(u);return{hasInnerBlocks:!(!a||!a.innerBlocks.length)}},[u]),h=(0,n.useRef)();(0,n.useEffect)(()=>{void 0===d&&t({className:"col"})},[d,t]);const v=d&&d.toLowerCase().includes("col"),x=e=>0===Object.keys(e||{}).length,f=(0,s.useBlockProps)({ref:h});let _;g||(_=s.InnerBlocks.ButtonBlockAppender);const w=(0,s.useInnerBlocksProps)(f,{dropZoneElement:h.current,renderAppender:_});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{tagName:b,onSelectTagName:e=>t({tagName:e})}),!v&&(0,i.jsx)(s.InspectorControls,{children:(0,i.jsx)("div",{style:{padding:"0 16px",marginBottom:"16px"},children:(0,i.jsx)(l.Notice,{status:"warning",isDismissible:!1,children:(0,a.__)('Please add a Bootstrap column class (e.g. "col", "col-md-6") in the "Additional CSS class(es)" field under Advanced settings.',"bbfse-plugin")})})}),(0,i.jsx)(s.InspectorControls,{children:(0,i.jsxs)(l.__experimentalToolsPanel,{label:(0,a.__)("Data and Aria Attributes","bbfse-plugin"),resetAll:()=>t({dataAttributes:{},ariaAttributes:{}}),children:[(0,i.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>!x(p),label:(0,a.__)("Data attributes","bbfse-plugin"),onDeselect:()=>t({dataAttributes:{}}),isShownByDefault:!0,children:(0,i.jsx)(r,{label:(0,a.__)("Data attributes","bbfse-plugin")+" ",value:p,onChange:e=>t({dataAttributes:e})})}),(0,i.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>!x(m),label:(0,a.__)("Aria attributes","bbfse-plugin"),onDeselect:()=>t({ariaAttributes:{}}),isShownByDefault:!0,children:(0,i.jsx)(r,{label:(0,a.__)("Aria attributes","bbfse-plugin")+" ",value:m,onChange:e=>t({ariaAttributes:e})})})]})}),(0,i.jsx)(b,{...w})]})},save:function({attributes:{tagName:e="div",dataAttributes:t,ariaAttributes:a}}){const l=s.useBlockProps.save({...u(t,"data-"),...u(a,"aria-")}),n=s.useInnerBlocksProps.save(l);return(0,i.jsx)(e,{...n})}})})();