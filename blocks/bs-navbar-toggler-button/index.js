(()=>{"use strict";const t=window.wp.blocks,a=JSON.parse('{"UU":"rundizstrap-companion/blocks-bs-navbar-toggler-button"}'),e=window.wp.i18n,n=window.wp.blockEditor,s=window.wp.components,i=window.wp.element,r=["data-","aria-"];function o(t,a){const e={};if(!t)return e;const n=String(a||"").toLowerCase();return r.includes(n)?(Object.entries(t).forEach(([t,a])=>{const s=l(t,n);s&&(e[`${n}${s}`]=c(a))}),e):e}function l(t,a=""){if(null==t)return"";let e=String(t).trim().toLowerCase();const n=String(a||"").toLowerCase();return e?(n&&e.startsWith(n)&&(e=e.slice(n.length)),e="aria-"===n||"aria"===n?e.replace(/[^a-z0-9_-]/g,""):e.replace(/[^a-z0-9._:-]/g,""),e):""}function c(t){return null==t?"":String(t).replace(/[\r\n\t]/g," ").replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F]/g,"").trim()}const u=window.ReactJSXRuntime;function p({label:t,value:a,onChange:n,prefix:r=""}){const o=a||{},[p,d]=(0,i.useState)([]);(0,i.useEffect)(()=>{const t=Object.entries(o).map(([t,a])=>({key:t,val:a}));d(t)},[a]);const b=t=>t.reduce((t,a)=>{const e=l(a.key,r);return e?(t[e]=c(a.val),t):t},{}),m=t=>{const a=t.map(t=>l(t.key,r)).filter(t=>""!==t);a.some((t,e)=>a.indexOf(t)!==e)||n(b(t))},_=(t,a,e)=>{const n=[...p];n[t][a]=e,d(n)};return(0,u.jsxs)("div",{className:"components-base-control",children:[(0,u.jsx)("label",{className:"components-base-control__label",children:t}),p.map((t,a)=>(0,u.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,u.jsx)(s.TextControl,{placeholder:(0,e.__)("Key","rundizstrap-companion"),value:t.key,onChange:t=>_(a,"key",t),onBlur:()=>m(p)}),(0,u.jsx)(s.TextControl,{placeholder:(0,e.__)("Value","rundizstrap-companion"),value:t.val,onChange:t=>_(a,"val",t),onBlur:()=>m(p)}),(0,u.jsx)(s.Button,{size:"small",isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(t=>{const a=p.filter((a,e)=>e!==t);d(a),n(b(a))})(a),label:(0,e.__)("Remove","rundizstrap-companion")})]},a)),(0,u.jsx)(s.Button,{variant:"secondary",onClick:()=>{const t=[...p,{key:"",val:""}];d(t)},size:"small",children:(0,e.__)("Add attribute","rundizstrap-companion")})]})}function d(t,a=""){if("string"!=typeof t)return t;let e=t.replace(/%[a-fA-F0-9][a-fA-F0-9]/g,"");return e=e.replace(/[^A-Za-z0-9_-]/g,""),""===e&&a?d(a):e}function b(t,a=!1){const e="string"==typeof t?t:"",n=/\s$/.test(e),s=e.split(/\s+/).map(t=>d(t)).filter(t=>""!==t).join(" ");return a&&n&&""!==s?s+" ":s}(0,t.registerBlockType)(a.UU,{icon:{src:(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-list",viewBox:"0 0 16 16",children:(0,u.jsx)("path",{"fill-rule":"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"})})},edit:function({attributes:t,setAttributes:a}){const{dataAttributes:i,ariaAttributes:r,iconClassName:l,iconDataAttributes:c,iconAriaAttributes:d}=t,m=b(l||""),_=(0,n.useBlockProps)({className:"navbar-toggler",type:"button",...o(i,"data-"),...o(r,"aria-")}),h={className:`navbar-toggler-icon ${m}`.trim(),...o(c,"data-"),...o(d,"aria-")},x=t=>0===Object.keys(t||{}).length;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(n.InspectorControls,{children:[(0,u.jsxs)(s.__experimentalToolsPanel,{label:(0,e.__)("Button Settings","rundizstrap-companion"),resetAll:()=>a({dataAttributes:{},ariaAttributes:{}}),children:[(0,u.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!x(i),label:(0,e.__)("Data attributes","rundizstrap-companion"),onDeselect:()=>a({dataAttributes:{}}),isShownByDefault:!0,children:(0,u.jsx)(p,{label:(0,e.__)("Data attributes","rundizstrap-companion")+" ",value:i,onChange:t=>a({dataAttributes:t}),prefix:"data-"})}),(0,u.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!x(r),label:(0,e.__)("Aria attributes","rundizstrap-companion"),onDeselect:()=>a({ariaAttributes:{}}),isShownByDefault:!0,children:(0,u.jsx)(p,{label:(0,e.__)("Aria attributes","rundizstrap-companion")+" ",value:r,onChange:t=>a({ariaAttributes:t}),prefix:"aria-"})})]}),(0,u.jsxs)(s.__experimentalToolsPanel,{label:(0,e.__)("Icon Settings","rundizstrap-companion"),resetAll:()=>a({iconClassName:"",iconDataAttributes:{},iconAriaAttributes:{}}),children:[(0,u.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>""!==l,label:(0,e.__)("Icon Additional Class(es)","rundizstrap-companion"),onDeselect:()=>a({iconClassName:""}),isShownByDefault:!0,children:(0,u.jsx)(s.TextControl,{label:(0,e.__)("Icon Additional Class(es)","rundizstrap-companion"),value:l,onChange:t=>a({iconClassName:b(t,!0)}),onBlur:()=>a({iconClassName:b(l||"")}),help:(0,e.__)("Add additional classes to the icon span.","rundizstrap-companion")})}),(0,u.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!x(c),label:(0,e.__)("Icon data attributes","rundizstrap-companion"),onDeselect:()=>a({iconDataAttributes:{}}),isShownByDefault:!0,children:(0,u.jsx)(p,{label:(0,e.__)("Icon data attributes","rundizstrap-companion")+" ",value:c,onChange:t=>a({iconDataAttributes:t}),prefix:"data-"})}),(0,u.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!x(d),label:(0,e.__)("Icon aria attributes","rundizstrap-companion"),onDeselect:()=>a({iconAriaAttributes:{}}),isShownByDefault:!0,children:(0,u.jsx)(p,{label:(0,e.__)("Icon aria attributes","rundizstrap-companion")+" ",value:d,onChange:t=>a({iconAriaAttributes:t}),prefix:"aria-"})})]})]}),(0,u.jsx)("button",{..._,children:(0,u.jsx)("span",{...h})})]})},save:function({attributes:t}){const{dataAttributes:a,ariaAttributes:e,iconClassName:s,iconDataAttributes:i,iconAriaAttributes:r}=t,l=b(s||""),c=n.useBlockProps.save({className:"navbar-toggler",type:"button"}),p=o(a,"data-"),d=o(e,"aria-");Object.assign(c,p,d);const m=o(i,"data-"),_=o(r,"aria-"),h={className:`navbar-toggler-icon ${l}`.trim(),...m,..._};return(0,u.jsx)("button",{...c,children:(0,u.jsx)("span",{...h})})}})})();